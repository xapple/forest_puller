<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.9.1" />
<title>forest_puller.viz.area_aggregate API documentation</title>
<meta name="description" content="Written by Lucas Sinclair and Paul Rougieux â€¦" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>forest_puller.viz.area_aggregate</code></h1>
</header>
<section id="section-intro">
<p>Written by Lucas Sinclair and Paul Rougieux.</p>
<p>JRC Biomass Project.
Unit D1 Bioeconomy.</p>
<p>Typically you can use this class like this:</p>
<pre><code>&gt;&gt;&gt; from forest_puller.viz.area_aggregate import area_agg_data
&gt;&gt;&gt; print(area_agg_data.area_ipcc)
</code></pre>
<p>To generate the plot:</p>
<pre><code>&gt;&gt;&gt; from forest_puller.viz.area_aggregate import area_agg
&gt;&gt;&gt; area_agg.plot(rerun=True)
&gt;&gt;&gt; print(area_agg.path)
</code></pre>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">#!/usr/bin/env python3
# -*- coding: utf-8 -*-

&#34;&#34;&#34;
Written by Lucas Sinclair and Paul Rougieux.

JRC Biomass Project.
Unit D1 Bioeconomy.

Typically you can use this class like this:

    &gt;&gt;&gt; from forest_puller.viz.area_aggregate import area_agg_data
    &gt;&gt;&gt; print(area_agg_data.area_ipcc)

To generate the plot:

    &gt;&gt;&gt; from forest_puller.viz.area_aggregate import area_agg
    &gt;&gt;&gt; area_agg.plot(rerun=True)
    &gt;&gt;&gt; print(area_agg.path)
&#34;&#34;&#34;

# Built-in modules #

# Internal modules #
from forest_puller import cache_dir

# First party modules #
from plumbing.graphs import Graph
from plumbing.cache import property_cached

# Third party modules #
import pandas, brewer2mpl, matplotlib
from matplotlib import pyplot

###############################################################################
class AreaAggregateData:
    &#34;&#34;&#34;
    Prepare all aggregated by year dataframes.
    &#34;&#34;&#34;

    #----------------------------- Data sources ------------------------------#
    @property
    def area_ipcc(self):
        # Import #
        from forest_puller.ipcc.agg import source
        # Load #
        df = source.forest_area.copy()
        # Take only columns that interest us #
        df = df[[&#39;year&#39;, &#39;area&#39;]]
        # Add source #
        df.insert(0, &#39;source&#39;, &#34;ipcc&#34;)
        # Return #
        return df

    @property
    def area_soef(self):
        # Import #
        from forest_puller.soef.agg import source
        # Load #
        df = source.forest_area.copy()
        # Add source #
        df.insert(0, &#39;source&#39;, &#39;soef&#39;)
        # Return #
        return df

    @property
    def area_faostat(self):
        # Import #
        from forest_puller.faostat.land.agg import source
        # Load #
        df = source.forest_area.copy()
        # Add source #
        df.insert(0, &#39;source&#39;, &#39;faostat&#39;)
        # Return #
        return df

    @property
    def area_fra(self):
        # Import #
        from forest_puller.fra.agg import source
        # Load #
        df = source.forest_area.copy()
        # Add source #
        df.insert(0, &#39;source&#39;, &#39;fra&#39;)
        # Return #
        return df

    #---------------------------- Data combined ------------------------------#
    @property_cached
    def df(self):
        &#34;&#34;&#34;
        Importing the other graph at: `forest_puller.viz.area_comp`
        and using its data frame to aggregate and sum doesn&#39;t work because
        one has to filter on the available years. One possible alternative
        approach is some long dataframe processing starting with:

            df.groupby([source,year]).agg(n=count).query(n==27)

        This is not the road we have chosen here.
        &#34;&#34;&#34;
        # Load all data sources #
        sources = [self.area_ipcc, self.area_soef, self.area_faostat,
                   self.area_fra]
        # Combine data sources #
        df = pandas.concat(sources, ignore_index=True)
        # Adjust to million hectares #
        df[&#39;area&#39;] /= 1e6
        # Return #
        return df

###############################################################################
class AreaAggregate(Graph):
    &#34;&#34;&#34;
    This graph will show the combined forested area by summing all countries
    together into one graph.
    &#34;&#34;&#34;

    # Size #
    height = 7
    width  = 10

    # Basic params #
    short_name = &#39;area_aggregate&#39;
    y_grid  = True
    x_label = &#34;Years&#34;
    y_label = &#34;Area in million hectares&#34;

    # Colors #
    colors = brewer2mpl.get_map(&#39;Set1&#39;, &#39;qualitative&#39;, 7).mpl_colors

    # Name mapping #
    label_to_color = {&#39;IPCC&#39;:    colors[0],
                      &#39;SOEF&#39;:    colors[1],
                      &#39;FAOSTAT&#39;: colors[3],
                      &#39;FRA&#39;:     colors[4]}

    def line_plot(self, axes, x, y, source, **kw):
        # Filter by source #
        data = area_agg_data.df.query(&#34;source == &#39;%s&#39;&#34; % source)
        # Plot #
        axes.plot(data[x], data[y],
                  marker     = &#34;.&#34;,
                  markersize = 10.0,
                  color      = self.label_to_color[source.upper()],
                  **kw)

    def add_main_legend(self, axes):
        items   = self.label_to_color.items()
        patches = [matplotlib.patches.Patch(color=v, label=k) for k,v in items]
        axes.legend(handles   = patches,
                    borderpad      = 1,
                    prop           = {&#39;size&#39;: 12},
                    frameon        = True,
                    shadow         = True,
                    loc            = &#39;center left&#39;,
                    bbox_to_anchor = (1.03, 0.5))

    def plot(self, **kwargs):
        # Plot #
        fig  = pyplot.figure()
        axes = fig.add_subplot(111)

        # Plot every data source #
        self.line_plot(axes, &#39;year&#39;, &#39;area&#39;, &#39;ipcc&#39;)
        self.line_plot(axes, &#39;year&#39;, &#39;area&#39;, &#39;soef&#39;)
        self.line_plot(axes, &#39;year&#39;, &#39;area&#39;, &#39;faostat&#39;)
        self.line_plot(axes, &#39;year&#39;, &#39;area&#39;, &#39;fra&#39;)

        # Leave space for the legend #
        fig.subplots_adjust(left=0.1, right=0.8, top=0.95)

        # Add legend #
        self.add_main_legend(axes)

        # Save #
        self.save_plot(**kwargs)

        # Return for display in notebooks for instance #
        return fig

###############################################################################
# Create the large df with all sources #
area_agg_data = AreaAggregateData()

# Create the graph #
export_dir = cache_dir + &#39;graphs/eu_tot/&#39;
area_agg = AreaAggregate(base_dir = export_dir)</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="forest_puller.viz.area_aggregate.AreaAggregate"><code class="flex name class">
<span>class <span class="ident">AreaAggregate</span></span>
<span>(</span><span>parent=None, base_dir=None, short_name=None)</span>
</code></dt>
<dd>
<div class="desc"><p>This graph will show the combined forested area by summing all countries
together into one graph.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class AreaAggregate(Graph):
    &#34;&#34;&#34;
    This graph will show the combined forested area by summing all countries
    together into one graph.
    &#34;&#34;&#34;

    # Size #
    height = 7
    width  = 10

    # Basic params #
    short_name = &#39;area_aggregate&#39;
    y_grid  = True
    x_label = &#34;Years&#34;
    y_label = &#34;Area in million hectares&#34;

    # Colors #
    colors = brewer2mpl.get_map(&#39;Set1&#39;, &#39;qualitative&#39;, 7).mpl_colors

    # Name mapping #
    label_to_color = {&#39;IPCC&#39;:    colors[0],
                      &#39;SOEF&#39;:    colors[1],
                      &#39;FAOSTAT&#39;: colors[3],
                      &#39;FRA&#39;:     colors[4]}

    def line_plot(self, axes, x, y, source, **kw):
        # Filter by source #
        data = area_agg_data.df.query(&#34;source == &#39;%s&#39;&#34; % source)
        # Plot #
        axes.plot(data[x], data[y],
                  marker     = &#34;.&#34;,
                  markersize = 10.0,
                  color      = self.label_to_color[source.upper()],
                  **kw)

    def add_main_legend(self, axes):
        items   = self.label_to_color.items()
        patches = [matplotlib.patches.Patch(color=v, label=k) for k,v in items]
        axes.legend(handles   = patches,
                    borderpad      = 1,
                    prop           = {&#39;size&#39;: 12},
                    frameon        = True,
                    shadow         = True,
                    loc            = &#39;center left&#39;,
                    bbox_to_anchor = (1.03, 0.5))

    def plot(self, **kwargs):
        # Plot #
        fig  = pyplot.figure()
        axes = fig.add_subplot(111)

        # Plot every data source #
        self.line_plot(axes, &#39;year&#39;, &#39;area&#39;, &#39;ipcc&#39;)
        self.line_plot(axes, &#39;year&#39;, &#39;area&#39;, &#39;soef&#39;)
        self.line_plot(axes, &#39;year&#39;, &#39;area&#39;, &#39;faostat&#39;)
        self.line_plot(axes, &#39;year&#39;, &#39;area&#39;, &#39;fra&#39;)

        # Leave space for the legend #
        fig.subplots_adjust(left=0.1, right=0.8, top=0.95)

        # Add legend #
        self.add_main_legend(axes)

        # Save #
        self.save_plot(**kwargs)

        # Return for display in notebooks for instance #
        return fig</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>plumbing.graphs.Graph</li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="forest_puller.viz.area_aggregate.AreaAggregate.colors"><code class="name">var <span class="ident">colors</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="forest_puller.viz.area_aggregate.AreaAggregate.height"><code class="name">var <span class="ident">height</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="forest_puller.viz.area_aggregate.AreaAggregate.label_to_color"><code class="name">var <span class="ident">label_to_color</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="forest_puller.viz.area_aggregate.AreaAggregate.short_name"><code class="name">var <span class="ident">short_name</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="forest_puller.viz.area_aggregate.AreaAggregate.width"><code class="name">var <span class="ident">width</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="forest_puller.viz.area_aggregate.AreaAggregate.x_label"><code class="name">var <span class="ident">x_label</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="forest_puller.viz.area_aggregate.AreaAggregate.y_grid"><code class="name">var <span class="ident">y_grid</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="forest_puller.viz.area_aggregate.AreaAggregate.y_label"><code class="name">var <span class="ident">y_label</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="forest_puller.viz.area_aggregate.AreaAggregate.add_main_legend"><code class="name flex">
<span>def <span class="ident">add_main_legend</span></span>(<span>self, axes)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def add_main_legend(self, axes):
    items   = self.label_to_color.items()
    patches = [matplotlib.patches.Patch(color=v, label=k) for k,v in items]
    axes.legend(handles   = patches,
                borderpad      = 1,
                prop           = {&#39;size&#39;: 12},
                frameon        = True,
                shadow         = True,
                loc            = &#39;center left&#39;,
                bbox_to_anchor = (1.03, 0.5))</code></pre>
</details>
</dd>
<dt id="forest_puller.viz.area_aggregate.AreaAggregate.line_plot"><code class="name flex">
<span>def <span class="ident">line_plot</span></span>(<span>self, axes, x, y, source, **kw)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def line_plot(self, axes, x, y, source, **kw):
    # Filter by source #
    data = area_agg_data.df.query(&#34;source == &#39;%s&#39;&#34; % source)
    # Plot #
    axes.plot(data[x], data[y],
              marker     = &#34;.&#34;,
              markersize = 10.0,
              color      = self.label_to_color[source.upper()],
              **kw)</code></pre>
</details>
</dd>
<dt id="forest_puller.viz.area_aggregate.AreaAggregate.plot"><code class="name flex">
<span>def <span class="ident">plot</span></span>(<span>self, **kwargs)</span>
</code></dt>
<dd>
<div class="desc"><p>An example plot function. You have to subclass this method.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def plot(self, **kwargs):
    # Plot #
    fig  = pyplot.figure()
    axes = fig.add_subplot(111)

    # Plot every data source #
    self.line_plot(axes, &#39;year&#39;, &#39;area&#39;, &#39;ipcc&#39;)
    self.line_plot(axes, &#39;year&#39;, &#39;area&#39;, &#39;soef&#39;)
    self.line_plot(axes, &#39;year&#39;, &#39;area&#39;, &#39;faostat&#39;)
    self.line_plot(axes, &#39;year&#39;, &#39;area&#39;, &#39;fra&#39;)

    # Leave space for the legend #
    fig.subplots_adjust(left=0.1, right=0.8, top=0.95)

    # Add legend #
    self.add_main_legend(axes)

    # Save #
    self.save_plot(**kwargs)

    # Return for display in notebooks for instance #
    return fig</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="forest_puller.viz.area_aggregate.AreaAggregateData"><code class="flex name class">
<span>class <span class="ident">AreaAggregateData</span></span>
</code></dt>
<dd>
<div class="desc"><p>Prepare all aggregated by year dataframes.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class AreaAggregateData:
    &#34;&#34;&#34;
    Prepare all aggregated by year dataframes.
    &#34;&#34;&#34;

    #----------------------------- Data sources ------------------------------#
    @property
    def area_ipcc(self):
        # Import #
        from forest_puller.ipcc.agg import source
        # Load #
        df = source.forest_area.copy()
        # Take only columns that interest us #
        df = df[[&#39;year&#39;, &#39;area&#39;]]
        # Add source #
        df.insert(0, &#39;source&#39;, &#34;ipcc&#34;)
        # Return #
        return df

    @property
    def area_soef(self):
        # Import #
        from forest_puller.soef.agg import source
        # Load #
        df = source.forest_area.copy()
        # Add source #
        df.insert(0, &#39;source&#39;, &#39;soef&#39;)
        # Return #
        return df

    @property
    def area_faostat(self):
        # Import #
        from forest_puller.faostat.land.agg import source
        # Load #
        df = source.forest_area.copy()
        # Add source #
        df.insert(0, &#39;source&#39;, &#39;faostat&#39;)
        # Return #
        return df

    @property
    def area_fra(self):
        # Import #
        from forest_puller.fra.agg import source
        # Load #
        df = source.forest_area.copy()
        # Add source #
        df.insert(0, &#39;source&#39;, &#39;fra&#39;)
        # Return #
        return df

    #---------------------------- Data combined ------------------------------#
    @property_cached
    def df(self):
        &#34;&#34;&#34;
        Importing the other graph at: `forest_puller.viz.area_comp`
        and using its data frame to aggregate and sum doesn&#39;t work because
        one has to filter on the available years. One possible alternative
        approach is some long dataframe processing starting with:

            df.groupby([source,year]).agg(n=count).query(n==27)

        This is not the road we have chosen here.
        &#34;&#34;&#34;
        # Load all data sources #
        sources = [self.area_ipcc, self.area_soef, self.area_faostat,
                   self.area_fra]
        # Combine data sources #
        df = pandas.concat(sources, ignore_index=True)
        # Adjust to million hectares #
        df[&#39;area&#39;] /= 1e6
        # Return #
        return df</code></pre>
</details>
<h3>Instance variables</h3>
<dl>
<dt id="forest_puller.viz.area_aggregate.AreaAggregateData.area_faostat"><code class="name">var <span class="ident">area_faostat</span></code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def area_faostat(self):
    # Import #
    from forest_puller.faostat.land.agg import source
    # Load #
    df = source.forest_area.copy()
    # Add source #
    df.insert(0, &#39;source&#39;, &#39;faostat&#39;)
    # Return #
    return df</code></pre>
</details>
</dd>
<dt id="forest_puller.viz.area_aggregate.AreaAggregateData.area_fra"><code class="name">var <span class="ident">area_fra</span></code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def area_fra(self):
    # Import #
    from forest_puller.fra.agg import source
    # Load #
    df = source.forest_area.copy()
    # Add source #
    df.insert(0, &#39;source&#39;, &#39;fra&#39;)
    # Return #
    return df</code></pre>
</details>
</dd>
<dt id="forest_puller.viz.area_aggregate.AreaAggregateData.area_ipcc"><code class="name">var <span class="ident">area_ipcc</span></code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def area_ipcc(self):
    # Import #
    from forest_puller.ipcc.agg import source
    # Load #
    df = source.forest_area.copy()
    # Take only columns that interest us #
    df = df[[&#39;year&#39;, &#39;area&#39;]]
    # Add source #
    df.insert(0, &#39;source&#39;, &#34;ipcc&#34;)
    # Return #
    return df</code></pre>
</details>
</dd>
<dt id="forest_puller.viz.area_aggregate.AreaAggregateData.area_soef"><code class="name">var <span class="ident">area_soef</span></code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def area_soef(self):
    # Import #
    from forest_puller.soef.agg import source
    # Load #
    df = source.forest_area.copy()
    # Add source #
    df.insert(0, &#39;source&#39;, &#39;soef&#39;)
    # Return #
    return df</code></pre>
</details>
</dd>
<dt id="forest_puller.viz.area_aggregate.AreaAggregateData.df"><code class="name">var <span class="ident">df</span></code></dt>
<dd>
<div class="desc"><p>Importing the other graph at: <code><a title="forest_puller.viz.area_comp" href="area_comp.html">forest_puller.viz.area_comp</a></code>
and using its data frame to aggregate and sum doesn't work because
one has to filter on the available years. One possible alternative
approach is some long dataframe processing starting with:</p>
<pre><code>df.groupby([source,year]).agg(n=count).query(n==27)
</code></pre>
<p>This is not the road we have chosen here.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def __get__(self, instance, owner):
    &#34;&#34;&#34;
    If you see the current source code in a seemingly unrelated part of
    an auto-generated documentation, it means the program making the
    documentation was unable to correctly traverse a decorated property.
    &#34;&#34;&#34;
    # For debugging purposes #
    if False: print(&#34;-&gt; property cached `%s`&#34; % instance)
    # If called from a class #
    if instance is None: return self
    # Does a cache exist for this instance? #
    self.check_cache(instance)
    # Is the answer in the cache? #
    if self.name in instance.__cache__: return instance.__cache__[self.name]
    # If not we will compute it #
    if inspect.isgeneratorfunction(self.func): result = tuple(self.func(instance))
    else:                                      result = self.func(instance)
    # Let&#39;s store the answer for later #
    instance.__cache__[self.name] = result
    # Return #
    return result</code></pre>
</details>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="forest_puller.viz" href="index.html">forest_puller.viz</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="forest_puller.viz.area_aggregate.AreaAggregate" href="#forest_puller.viz.area_aggregate.AreaAggregate">AreaAggregate</a></code></h4>
<ul class="two-column">
<li><code><a title="forest_puller.viz.area_aggregate.AreaAggregate.add_main_legend" href="#forest_puller.viz.area_aggregate.AreaAggregate.add_main_legend">add_main_legend</a></code></li>
<li><code><a title="forest_puller.viz.area_aggregate.AreaAggregate.colors" href="#forest_puller.viz.area_aggregate.AreaAggregate.colors">colors</a></code></li>
<li><code><a title="forest_puller.viz.area_aggregate.AreaAggregate.height" href="#forest_puller.viz.area_aggregate.AreaAggregate.height">height</a></code></li>
<li><code><a title="forest_puller.viz.area_aggregate.AreaAggregate.label_to_color" href="#forest_puller.viz.area_aggregate.AreaAggregate.label_to_color">label_to_color</a></code></li>
<li><code><a title="forest_puller.viz.area_aggregate.AreaAggregate.line_plot" href="#forest_puller.viz.area_aggregate.AreaAggregate.line_plot">line_plot</a></code></li>
<li><code><a title="forest_puller.viz.area_aggregate.AreaAggregate.plot" href="#forest_puller.viz.area_aggregate.AreaAggregate.plot">plot</a></code></li>
<li><code><a title="forest_puller.viz.area_aggregate.AreaAggregate.short_name" href="#forest_puller.viz.area_aggregate.AreaAggregate.short_name">short_name</a></code></li>
<li><code><a title="forest_puller.viz.area_aggregate.AreaAggregate.width" href="#forest_puller.viz.area_aggregate.AreaAggregate.width">width</a></code></li>
<li><code><a title="forest_puller.viz.area_aggregate.AreaAggregate.x_label" href="#forest_puller.viz.area_aggregate.AreaAggregate.x_label">x_label</a></code></li>
<li><code><a title="forest_puller.viz.area_aggregate.AreaAggregate.y_grid" href="#forest_puller.viz.area_aggregate.AreaAggregate.y_grid">y_grid</a></code></li>
<li><code><a title="forest_puller.viz.area_aggregate.AreaAggregate.y_label" href="#forest_puller.viz.area_aggregate.AreaAggregate.y_label">y_label</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="forest_puller.viz.area_aggregate.AreaAggregateData" href="#forest_puller.viz.area_aggregate.AreaAggregateData">AreaAggregateData</a></code></h4>
<ul class="">
<li><code><a title="forest_puller.viz.area_aggregate.AreaAggregateData.area_faostat" href="#forest_puller.viz.area_aggregate.AreaAggregateData.area_faostat">area_faostat</a></code></li>
<li><code><a title="forest_puller.viz.area_aggregate.AreaAggregateData.area_fra" href="#forest_puller.viz.area_aggregate.AreaAggregateData.area_fra">area_fra</a></code></li>
<li><code><a title="forest_puller.viz.area_aggregate.AreaAggregateData.area_ipcc" href="#forest_puller.viz.area_aggregate.AreaAggregateData.area_ipcc">area_ipcc</a></code></li>
<li><code><a title="forest_puller.viz.area_aggregate.AreaAggregateData.area_soef" href="#forest_puller.viz.area_aggregate.AreaAggregateData.area_soef">area_soef</a></code></li>
<li><code><a title="forest_puller.viz.area_aggregate.AreaAggregateData.df" href="#forest_puller.viz.area_aggregate.AreaAggregateData.df">df</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.9.1</a>.</p>
</footer>
</body>
</html>